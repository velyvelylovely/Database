## 사용자 정의 함수

데이터베이스 관리 시스템(DBMS)에서는 DBMS에서 제공하는 내장 함수 외에도, 사용자가 직접 함수를 정의하고 작성할 수 있습니다. 이를 사용자 정의 함수(User-Defined Function, UDF)라고 합니다.

사용자 정의 함수는 SQL을 활용하여 일련의 로직을 수행하고, 그 수행 결과를 단일 값으로 반환하는 모듈입니다. 이는 복잡한 연산이나 로직을 단순화하는 데 유용하며, 코드의 재사용성을 높이고 가독성을 향상시킵니다.

다음은 사용자 정의 함수의 예시입니다.

```sql
CREATE FUNCTION sf_password (password VARCHAR (255))
  RETURNS VARCHAR (255)
BEGIN

  RETURN
    CASE
      WHEN LENGTH (password) > 2 THEN
        CONCAT (SUBSTRING (password, 1, 2), '**')
      ELSE
        '****'
    END;

END;
```

위 SQL문은 'sf_password'라는 이름의 사용자 정의 함수를 생성하는 구문입니다. 이 함수는 'password'라는 이름의 문자열을 입력으로 받아 처리하며, 처리된 최종 결과를 문자열 형태로 반환합니다.

함수의 로직은 'BEGIN' 키워드 이후에 정의되어 있습니다. 'password'의 길이가 2보다 클 경우, 'password'의 앞 두 글자와 '**'를 결합하여 반환합니다. 만약 'password'의 길이가 2 이하라면, '****'를 반환합니다.

위에서 생성한 'sf_password'라는 이름의 사용자 정의 함수를 삭제하려면 다음과 같이 sql문을 작성할 수 있습니다.

```sql
DROP FUNCTION sf_password;
```

이 명령문을 실행하면, 'sf_password'라는 이름의 함수가 DBMS에서 삭제됩니다. 함수를 삭제하기 전에 해당 함수가 다른 곳에서 사용되지 않는지 반드시 확인해야 합니다. 사용 중인 함수를 삭제하면, 그 함수를 참조하는 쿼리나 프로시저 등에서 오류가 발생할 수 있습니다.

사용자 정의 함수를 활용하면, 복잡한 로직을 간단한 함수 호출로 대체할 수 있어 SQL 쿼리를 더 간결하고 이해하기 쉽게 만들 수 있습니다. 또한, 동일한 로직을 여러 곳에서 사용해야 하는 경우 함수를 만들어두면 코드의 중복을 줄일 수 있습니다. 이는 유지 보수를 용이하게 하며 버그 발생 가능성을 줄이는 데에도 도움이 됩니다.
